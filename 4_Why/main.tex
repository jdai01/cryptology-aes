\section{Why AES works? -- The mathematical foundations}
\label{sec:why}
\label{sec:math}

Figure \ref{fig:aes-round-function} shows the graph of a single AES round. 
The 16-byte input $A_0, \dots, A_{15}$ is fed byte-wise into the S-Box in the Byte Substitution Layer (Section \ref{sec:byte-substitution}).
The 16-byte output $B_0, \dots, B_{15}$ is permutated twice in the \textsc{ShiftRows} layer and mixed by the \textsc{MixColumn} transformation, both in the Diffusion layer (Section \ref{sec:diffusion})
Finally, the 128-bit subkey $k_i$ is XORed with the immediate result in the Key Addition layer (Section \ref{sec:key-addition}).

The mathematical foundations discussed in subsequent subsections are based on the \gls{AES} specification published by \gls{NIST} \cite{NIST_AES} and the textbook by Paar and Pelzl \cite{Paar2024}.

\begin{figure}[!ht]
    \centering
    \includegraphics[width=.9\textwidth]{aes-round-function.png}
    \caption{
        AES round function for rounds $1, 2, \dots, n_r-1$ \cite{Paar2024}.
    }
    \label{fig:aes-round-function}
\end{figure}


\input{4_Why/basic-math.tex}
\input{4_Why/SubBytes.tex}
\input{4_Why/ShiftRows.tex}
\input{4_Why/MixColumns.tex}
\input{4_Why/AddRoundKey.tex}
\input{4_Why/key-expansion.tex}
\input{4_Why/security-properties.tex}
\newpage

